<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data | Exploratory Data Analysis on NBA Salary</title>
  <meta name="description" content="Chapter 3 Data | Exploratory Data Analysis on NBA Salary" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data | Exploratory Data Analysis on NBA Salary" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data | Exploratory Data Analysis on NBA Salary" />
  
  
  

<meta name="author" content="Shuo Liu, Zhexin Wang, Liri Chen" />


<meta name="date" content="2022-12-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="proposal.html"/>
<link rel="next" href="results.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NBA_Salary_Predictor</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="proposal.html"><a href="proposal.html"><i class="fa fa-check"></i><b>2</b> Proposal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="proposal.html"><a href="proposal.html#research-topic"><i class="fa fa-check"></i><b>2.1</b> Research topic</a></li>
<li class="chapter" data-level="2.2" data-path="proposal.html"><a href="proposal.html#data-availability"><i class="fa fa-check"></i><b>2.2</b> Data availability</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="proposal.html"><a href="proposal.html#season-summary"><i class="fa fa-check"></i><b>2.2.1</b> Season summary</a></li>
<li class="chapter" data-level="2.2.2" data-path="proposal.html"><a href="proposal.html#contract"><i class="fa fa-check"></i><b>2.2.2</b> Contract</a></li>
<li class="chapter" data-level="2.2.3" data-path="proposal.html"><a href="proposal.html#miscellaneous"><i class="fa fa-check"></i><b>2.2.3</b> Miscellaneous</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#sources"><i class="fa fa-check"></i><b>3.1</b> Sources</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#cleaning-transformation"><i class="fa fa-check"></i><b>3.2</b> Cleaning / transformation</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#missing-value-analysis"><i class="fa fa-check"></i><b>3.3</b> Missing value analysis</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>4</b> Results</a>
<ul>
<li class="chapter" data-level="4.1" data-path="results.html"><a href="results.html#player-contract-salary-mean-ranking-cleveland-dot-plot"><i class="fa fa-check"></i><b>4.1</b> Player Contract Salary Mean Ranking (Cleveland dot plot)</a></li>
<li class="chapter" data-level="4.2" data-path="results.html"><a href="results.html#player-contract-salary-mean-distribution-q-q-plot-and-shapiro-wilk-normality-test"><i class="fa fa-check"></i><b>4.2</b> Player Contract Salary Mean Distribution (Q-Q plot and Shapiro-Wilk normality test)</a></li>
<li class="chapter" data-level="4.3" data-path="results.html"><a href="results.html#relationship-between-player-contract-salary-mean-and-age-mosaic-plot"><i class="fa fa-check"></i><b>4.3</b> Relationship between Player Contract Salary Mean and Age (Mosaic plot)</a></li>
<li class="chapter" data-level="4.4" data-path="results.html"><a href="results.html#relationship-between-player-contract-salary-mean-and-age-boxplot"><i class="fa fa-check"></i><b>4.4</b> Relationship between Player Contract Salary Mean and Age (Boxplot)</a></li>
<li class="chapter" data-level="4.5" data-path="results.html"><a href="results.html#player-contract-salary-mean-for-different-teams-ridgeline-plot"><i class="fa fa-check"></i><b>4.5</b> Player Contract Salary Mean for Different Teams (Ridgeline plot)</a></li>
<li class="chapter" data-level="4.6" data-path="results.html"><a href="results.html#parallel-coordinate-plot"><i class="fa fa-check"></i><b>4.6</b> Parallel Coordinate Plot</a></li>
<li class="chapter" data-level="4.7" data-path="results.html"><a href="results.html#player-contract-salary-mean-vs-all-continuous-player-statistics-pca"><i class="fa fa-check"></i><b>4.7</b> Player Contract Salary Mean vs All Continuous Player Statistics (PCA)</a></li>
<li class="chapter" data-level="4.8" data-path="results.html"><a href="results.html#average-points-per-game-vs-player-contract-salary-mean-scatterplot"><i class="fa fa-check"></i><b>4.8</b> Average Points per Game vs Player Contract Salary Mean (Scatterplot)</a></li>
<li class="chapter" data-level="4.9" data-path="results.html"><a href="results.html#player-contract-salary-mean-vs-total-number-of-games-conditioning-on-age-group-multi-facets-scatterplot"><i class="fa fa-check"></i><b>4.9</b> Player Contract Salary Mean vs Total Number of Games Conditioning on Age Group (Multi-facets Scatterplot)</a></li>
<li class="chapter" data-level="4.10" data-path="results.html"><a href="results.html#player-contract-salary-mean-vs-team-and-age-group-heatmap"><i class="fa fa-check"></i><b>4.10</b> Player Contract Salary Mean vs Team and Age Group (Heatmap)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>5</b> Interactive component</a></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploratory Data Analysis on NBA Salary</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="sources" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Sources<a href="data.html#sources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We scrape our data from the <a href="https://www.basketball-reference.com/">BasketBall Reference</a>, where we focus on players’ performance in these aspects, <code>rank</code>，<code>player</code>，<code>position</code>，<code>age</code>，<code>team</code>，<code>start games</code>，<code>field goals</code>，<code>field attempts</code>，<code>field precision</code>，<code>3-points</code>，<code>3-points attemps</code>，<code>3-points precision</code>，<code>2-points</code>，<code>2-points attemps</code>，<code>2-points precision</code>，<code>free-throws</code>，<code>free-throws attemps</code>，<code>free-throws precision</code>，<code>rebounds</code>，<code>assists</code>，<code>steals</code>，<code>blocks</code>，<code>turnovers</code>，<code>fouls</code> and <code>points per game</code>. For their salaries, Basketball Reference doesn’t provide the historical archive, so we use the mean of the current contracts as evaluator, ignoring the guaranteed.</p>
<!--to add a demo showing the data summary-->
</div>
<div id="cleaning-transformation" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Cleaning / transformation<a href="data.html#cleaning-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--how to left join, names, team-->
<p>We cleaned player_stat_total.csv and player_contract.csv separately and then merged the two datasets together. A preview of these two datasets is included in the proposal.</p>
<p><strong>Player Statistics Data Cleaning</strong></p>
<p>For player_stat_total.csv, we first dropped the player statistics collected before 2020. And then we dropped several columns that are unrelated to the contract salaries of the NBA players, including <code>X</code>, <code>rank</code>, <code>pos</code> (position of each player), and <code>personal_fouls</code>. <code>X</code> and <code>rank</code> are just two columns showing the index of each row, so we simply removed them. We dropped the position column because some players switch between multiple positions, which might cause confusion. For example, Stephen Curry plays PG and SG at the same time. The <code>personal_fouls</code> variable is not a meaningful indicator either, as it is impacted by too many unexpected variables, and the information about player performance could be better demonstrated by other variables.</p>
<p>We also dropped columns that are redundant, including <code>field_goals</code>, <code>field_goals_attempts</code>, <code>X3points</code>, <code>X3_points_attempts</code>, <code>X2points</code>, <code>X2points_attempts</code>, <code>freethrows</code>, <code>freethrows_attempts</code>, <code>orb</code> (offensive rebound percentage), <code>drb</code> (defensive rebound percentage). These variables are either transformed into percentages in other columns (for example, <code>field_goal_pct</code> = <code>field_goals_attempts</code>/<code>field_goals</code>*100%, so we only kept <code>field_goal_pct</code>, and dropped <code>field_goals_attempts</code> as well as <code>field_goals</code>), or that the information has already been addressed in other columns (for example, <code>trb</code> (total rebound percentage) = <code>orb</code> (offensive rebound percentage) + <code>drb</code> (defensive rebound percentage), so we only kept <code>trb</code>). We also dropped players that have played fewer than 20 games in total from 2021 to 2022, since the statistics are less meaningful when the number of games is too small.</p>
<p>The next step was to calculate the weighted average of each variable. We multiplied them by the ratio of the number of games per season to the total number of games of each player from 2021 to 2022. After this step, the player column becomes unique, meaning that one row corresponds to one specific player.</p>
<p>The last step of cleaning player_stat_total.csv was to split the players into three groups by their age, as there are age limitations and restrictions for athletes. We categorize them into young, middle, and old categories according to the thresholds 25 and 33</p>
<p>Here is a preview of the cleaned player_stat_total.csv:</p>
<pre><code>## # A tibble: 6 × 14
##   player sum_g…¹ avg_m…² avg_f…³ avg_X…⁴ avg_X…⁵ avg_f…⁶ avg_trb avg_a…⁷ avg_s…⁸
##   &lt;chr&gt;    &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Aaron…     175    29.4   0.489   0.331   0.566   0.695    5.77    2.9    0.643
## 2 Aaron…      38    16.5   0.441   0.365   0.477   0.834    1.68    2.14   0.666
## 3 Aaron…      35    24.2   0.463   0.304   0.573   0.729    3.6     1.4    0.6  
## 4 Al Ho…      97    28.8   0.462   0.345   0.561   0.835    7.41    3.4    0.758
## 5 Al-Fa…      28    20.2   0.394   0.221   0.492   0.821    5.1     1.5    0.9  
## 6 Alec …      49    28.3   0.394   0.405   0.383   0.825    4.87    2.92   0.959
## # … with 4 more variables: avg_blocks &lt;dbl&gt;, avg_turnovers &lt;dbl&gt;,
## #   avg_points_per_game &lt;dbl&gt;, age &lt;fct&gt;, and abbreviated variable names
## #   ¹​sum_games, ²​avg_min_per_game, ³​avg_field_goal_pct, ⁴​avg_X3points_pct,
## #   ⁵​avg_X2points_pct, ⁶​avg_free_throws_pct, ⁷​avg_assists, ⁸​avg_steals</code></pre>
<p><strong>Player Contract Salary Data Cleaning</strong></p>
<p>The original player contract dataset includes players’ name, team and their yearly contract salaries until 2028. Since the contract salary column was in character format, we transformed these columns into the numerical format. After that, we utilized mutate() function to add an additional column of contract salary mean by taking the average of all the contract salaries for each player.</p>
<p>Here is a preview of the cleaned player_contract.csv:</p>
<pre><code>##              player team Salary2022_2023 Salary2023_2024 Salary2024_2025
## 2     Stephen Curry  GSW        48070014        51915615        55761216
## 3 Russell Westbrook  LAL        47063478              NA              NA
## 4      LeBron James  LAL        44474988        53369986        57639585
## 5      Kevin Durant  BRK        44119845        47649433        51179021
## 6      Bradley Beal  WAS        43279250        46741590        50203930
## 7    Damian Lillard  POR        42492492        45640084        48787676
##   Salary2025_2026 Salary2026_2027 Salary2027_2028 Guaranteed        ID
## 2        59606817              NA              NA  215353662 curryst01
## 3              NA              NA              NA   47063478 westbru01
## 4              NA              NA              NA   97844974 jamesle01
## 5        54708609              NA              NA  197656908 duranke01
## 6        53666270        57128610              NA  193891040  bealbr01
## 7        58545211        63228828              NA  195465463 lillada01
##   SalaryMean
## 2   95659328
## 3   47063478
## 4   69618182
## 5   87798493
## 6   80326288
## 7   82333452</code></pre>
<p><strong>Final Dataset After Cleaning</strong></p>
<p>Finally, we utilized merge() function to left join the cleaned player statistic dataset and cleaned player contract dataset by player name to get a final merged dataset for our project.We dropped the guaranteed salary column because it is a redundant variable, as all the contracts signed will be guaranteed for the remainder of the season. We also dropped the player id column as we already have the player name column to represent each player. Lastly, we simply divide the <code>SalaryMean</code> by 10000000 to make it more readable.</p>
<p>And here’s a preview of the final cleaned dataset data_merged.csv:</p>
<pre><code>##               player sum_games avg_min_per_game avg_field_goal_pct
## 1       Aaron Gordon       175         29.40000          0.4890000
## 2      Aaron Holiday        38         16.53947          0.4414211
## 3      Aaron Wiggins        35         24.20000          0.4630000
## 4         Al Horford        97         28.75361          0.4620928
## 5         Alec Burks        49         28.29388          0.3939592
## 6 Aleksej Pokusevski        40         23.00000          0.3611000
##   avg_X3points_pct avg_X2points_pct avg_free_throws_pct  avg_trb avg_assists
## 1        0.3308571        0.5660000           0.6950000 5.771429    2.900000
## 2        0.3651316        0.4772895           0.8345000 1.678947    2.136842
## 3        0.3040000        0.5730000           0.7290000 3.600000    1.400000
## 4        0.3452371        0.5612165           0.8350722 7.411340    3.400000
## 5        0.4051224        0.3827959           0.8254694 4.869388    2.918367
## 6        0.2827000        0.4315000           0.7266000 4.850000    2.170000
##   avg_steals avg_blocks avg_turnovers avg_points_per_game    age team
## 1  0.6428571  0.6571429      1.871429           13.514286 Middle  DEN
## 2  0.6657895  0.1552632      1.047368            6.428947  Young  ATL
## 3  0.6000000  0.2000000      1.100000            8.300000  Young  OKC
## 4  0.7577320  1.1845361      0.928866           11.354639    Old  BOS
## 5  0.9591837  0.3000000      1.089796           11.802041 Middle  DET
## 6  0.4600000  0.8100000      1.990000            8.020000  Young  OKC
##   SalaryMean
## 1  3.2686909
## 2  0.1836090
## 3  0.1912347
## 4  1.9500000
## 5  1.0251200
## 6  0.6640373</code></pre>
</div>
<div id="missing-value-analysis" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Missing value analysis<a href="data.html#missing-value-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--to numeric, isnan, change team issue-->
<p><strong>Missing Value Plot for Messy Data</strong></p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-12-1.png" width="1920" /></p>
<p>We made a missing value plot using plot_missing() function from the redav package to visualize the pattern of the missing value in our original dataset. We discovered that columns of <code>free_throws_pct</code> and <code>x3point_pct</code> have the most number of rows missing.</p>
<p><strong>Missing Value Heatmap for Data After Cleaning</strong></p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-13-1.png" width="768" />
After cleaning the data, as demonstrated in section 3.2, we got the tidy and representative data. We created the missing value heatmap according to the cleaned data using ggplot function to visualize missing values in each variable columns for each NBA player. From the heatmap, we observed that there are very little missing data in our dataset after data cleaning, demonstrating the effectiveness of our preprocessing methods. Column <code>avg_X3points_pct</code> has the most missing values, considering the fact that there are fewer players who have the opportunity to shoot three pointers in a game. Thus, we filled the missing values with zeros, e.g. Ivica Zubac and Jarrett Allen with no three pointers percision records are considered as not making any three pointers.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="proposal.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/EDAV-project-14/NBA_Salary_Predictor/edit/main/data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/EDAV-project-14/NBA_Salary_Predictor/blob/main/data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
